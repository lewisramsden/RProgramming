<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Week3 Loops | Introduction to R Programming - University of York</title>
  <meta name="description" content="These lecture notes contain all the material for the ‘Introduction to R Programming’ workshops, which is a supplimentary course of the `BSc Actuarial Science’ programme at the University of York." />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Week3 Loops | Introduction to R Programming - University of York" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="These lecture notes contain all the material for the ‘Introduction to R Programming’ workshops, which is a supplimentary course of the `BSc Actuarial Science’ programme at the University of York." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Week3 Loops | Introduction to R Programming - University of York" />
  
  <meta name="twitter:description" content="These lecture notes contain all the material for the ‘Introduction to R Programming’ workshops, which is a supplimentary course of the `BSc Actuarial Science’ programme at the University of York." />
  

<meta name="author" content="Dr. Lewis Ramsden" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="conditionals-and-if-statements.html"/>
<link rel="next" href="functions.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.26/datatables.js"></script>
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R Programming</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-this-course"><i class="fa fa-check"></i>About This Course</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#datacamp"><i class="fa fa-check"></i>DataCamp</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html"><i class="fa fa-check"></i><b>1</b> RStudio and R Basics (Revision)</a>
<ul>
<li class="chapter" data-level="1.1" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#how-to-install-r-and-rstudio"><i class="fa fa-check"></i><b>1.1</b> How to install R and RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#rstudio-interface-explained"><i class="fa fa-check"></i><b>1.2</b> RStudio interface explained</a></li>
<li class="chapter" data-level="1.3" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#mathematical-calculations"><i class="fa fa-check"></i><b>1.3</b> Mathematical calculations</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#basic-numerical-calculations"><i class="fa fa-check"></i><b>1.3.1</b> Basic numerical calculations</a></li>
<li class="chapter" data-level="1.3.2" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#more-complicated-calculations"><i class="fa fa-check"></i><b>1.3.2</b> More complicated calculations</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#r-script"><i class="fa fa-check"></i><b>1.4</b> R script</a></li>
<li class="chapter" data-level="1.5" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#assigning-variables"><i class="fa fa-check"></i><b>1.5</b> Assigning variables</a></li>
<li class="chapter" data-level="1.6" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#vectors-and-matrices"><i class="fa fa-check"></i><b>1.6</b> Vectors and matrices</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#vectors"><i class="fa fa-check"></i><b>1.6.1</b> Vectors</a></li>
<li class="chapter" data-level="1.6.2" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#vector-calculations"><i class="fa fa-check"></i><b>1.6.2</b> Vector calculations</a></li>
<li class="chapter" data-level="1.6.3" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#vector-strings"><i class="fa fa-check"></i><b>1.6.3</b> Vector strings</a></li>
<li class="chapter" data-level="1.6.4" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#vector-extraction"><i class="fa fa-check"></i><b>1.6.4</b> Vector extraction</a></li>
<li class="chapter" data-level="1.6.5" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#exercises"><i class="fa fa-check"></i><b>1.6.5</b> Exercises</a></li>
<li class="chapter" data-level="1.6.6" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#matrices"><i class="fa fa-check"></i><b>1.6.6</b> Matrices</a></li>
<li class="chapter" data-level="1.6.7" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#matrix-calculations"><i class="fa fa-check"></i><b>1.6.7</b> Matrix calculations</a></li>
<li class="chapter" data-level="1.6.8" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#matrix-operations"><i class="fa fa-check"></i><b>1.6.8</b> Matrix operations</a></li>
<li class="chapter" data-level="1.6.9" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#matrix-extraction"><i class="fa fa-check"></i><b>1.6.9</b> Matrix extraction</a></li>
<li class="chapter" data-level="1.6.10" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#exercises-1"><i class="fa fa-check"></i><b>1.6.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#plotting-graphs"><i class="fa fa-check"></i><b>1.7</b> Plotting graphs</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#adding-to-plots-lines-points-etc."><i class="fa fa-check"></i><b>1.7.1</b> Adding to plots (lines, points etc.)</a></li>
<li class="chapter" data-level="1.7.2" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#exercises-2"><i class="fa fa-check"></i><b>1.7.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#applied-exercises"><i class="fa fa-check"></i><b>1.8</b> Applied exercises</a></li>
<li class="chapter" data-level="1.9" data-path="rstudio-and-r-basics-revision.html"><a href="rstudio-and-r-basics-revision.html#datacamp-courses"><i class="fa fa-check"></i><b>1.9</b> DataCamp course(s)</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="conditionals-and-if-statements.html"><a href="conditionals-and-if-statements.html"><i class="fa fa-check"></i><b>2</b> Conditionals and IF Statements</a>
<ul>
<li class="chapter" data-level="2.1" data-path="conditionals-and-if-statements.html"><a href="conditionals-and-if-statements.html#relational-operators"><i class="fa fa-check"></i><b>2.1</b> Relational operators</a></li>
<li class="chapter" data-level="2.2" data-path="conditionals-and-if-statements.html"><a href="conditionals-and-if-statements.html#logical-operators"><i class="fa fa-check"></i><b>2.2</b> Logical operators</a></li>
<li class="chapter" data-level="2.3" data-path="conditionals-and-if-statements.html"><a href="conditionals-and-if-statements.html#if-statements"><i class="fa fa-check"></i><b>2.3</b> IF statements</a></li>
<li class="chapter" data-level="2.4" data-path="conditionals-and-if-statements.html"><a href="conditionals-and-if-statements.html#exercises-3"><i class="fa fa-check"></i><b>2.4</b> Exercises</a></li>
<li class="chapter" data-level="2.5" data-path="conditionals-and-if-statements.html"><a href="conditionals-and-if-statements.html#applied-exercises-1"><i class="fa fa-check"></i><b>2.5</b> Applied exercises</a></li>
<li class="chapter" data-level="2.6" data-path="conditionals-and-if-statements.html"><a href="conditionals-and-if-statements.html#datacamp-courses-1"><i class="fa fa-check"></i><b>2.6</b> DataCamp course(s)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="loops.html"><a href="loops.html"><i class="fa fa-check"></i><b>3</b> Loops</a>
<ul>
<li class="chapter" data-level="3.1" data-path="loops.html"><a href="loops.html#for-loops"><i class="fa fa-check"></i><b>3.1</b> For loops</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="loops.html"><a href="loops.html#matrices-1"><i class="fa fa-check"></i><b>3.1.1</b> Matrices</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="loops.html"><a href="loops.html#while-loops"><i class="fa fa-check"></i><b>3.2</b> While loops</a></li>
<li class="chapter" data-level="3.3" data-path="loops.html"><a href="loops.html#exercises-4"><i class="fa fa-check"></i><b>3.3</b> Exercises</a></li>
<li class="chapter" data-level="3.4" data-path="loops.html"><a href="loops.html#applied-exercises-2"><i class="fa fa-check"></i><b>3.4</b> Applied Exercises</a></li>
<li class="chapter" data-level="3.5" data-path="loops.html"><a href="loops.html#datacamp-courses-2"><i class="fa fa-check"></i><b>3.5</b> DataCamp course(s)</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>4</b> Functions</a>
<ul>
<li class="chapter" data-level="4.1" data-path="functions.html"><a href="functions.html#creating-functions"><i class="fa fa-check"></i><b>4.1</b> Creating functions</a></li>
<li class="chapter" data-level="4.2" data-path="functions.html"><a href="functions.html#prime-number-calculator---example"><i class="fa fa-check"></i><b>4.2</b> Prime number calculator - example</a></li>
<li class="chapter" data-level="4.3" data-path="functions.html"><a href="functions.html#multiple-input-variables"><i class="fa fa-check"></i><b>4.3</b> Multiple Input Variables</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="functions.html"><a href="functions.html#default-options"><i class="fa fa-check"></i><b>4.3.1</b> Default options</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="functions.html"><a href="functions.html#exercises-5"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
<li class="chapter" data-level="4.5" data-path="functions.html"><a href="functions.html#datacamp-courses-3"><i class="fa fa-check"></i><b>4.5</b> DataCamp course(s)</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-analysis.html"><a href="data-analysis.html"><i class="fa fa-check"></i><b>5</b> Data Analysis</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-analysis.html"><a href="data-analysis.html#creating-a-data-frame"><i class="fa fa-check"></i><b>5.1</b> Creating a data frame</a></li>
<li class="chapter" data-level="5.2" data-path="data-analysis.html"><a href="data-analysis.html#importing-data---excel"><i class="fa fa-check"></i><b>5.2</b> Importing data - Excel</a></li>
<li class="chapter" data-level="5.3" data-path="data-analysis.html"><a href="data-analysis.html#manipulating-and-analysing-data"><i class="fa fa-check"></i><b>5.3</b> Manipulating and analysing data</a></li>
<li class="chapter" data-level="5.4" data-path="data-analysis.html"><a href="data-analysis.html#conditional-extraction"><i class="fa fa-check"></i><b>5.4</b> Conditional extraction</a></li>
<li class="chapter" data-level="5.5" data-path="data-analysis.html"><a href="data-analysis.html#adding-data"><i class="fa fa-check"></i><b>5.5</b> Adding data</a></li>
<li class="chapter" data-level="5.6" data-path="data-analysis.html"><a href="data-analysis.html#the-apply-family"><i class="fa fa-check"></i><b>5.6</b> The <code>apply</code> family</a></li>
<li class="chapter" data-level="5.7" data-path="data-analysis.html"><a href="data-analysis.html#exercises-6"><i class="fa fa-check"></i><b>5.7</b> Exercises</a></li>
<li class="chapter" data-level="5.8" data-path="data-analysis.html"><a href="data-analysis.html#datacamp-courses-4"><i class="fa fa-check"></i><b>5.8</b> DataCamp course(s)</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="additional-tips.html"><a href="additional-tips.html"><i class="fa fa-check"></i><b>A</b> Additional Tips</a>
<ul>
<li class="chapter" data-level="" data-path="additional-tips.html"><a href="additional-tips.html#commenting"><i class="fa fa-check"></i>Commenting</a></li>
<li class="chapter" data-level="" data-path="additional-tips.html"><a href="additional-tips.html#help"><i class="fa fa-check"></i>Help</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="cheat-sheets.html"><a href="cheat-sheets.html"><i class="fa fa-check"></i><b>B</b> Cheat Sheets</a>
<ul>
<li class="chapter" data-level="" data-path="cheat-sheets.html"><a href="cheat-sheets.html#r-cheat-sheets"><i class="fa fa-check"></i>R Cheat Sheets</a></li>
<li class="chapter" data-level="" data-path="cheat-sheets.html"><a href="cheat-sheets.html#rmarkdown-cheat-sheets"><i class="fa fa-check"></i>RMarkdown Cheat Sheets</a></li>
<li class="chapter" data-level="" data-path="cheat-sheets.html"><a href="cheat-sheets.html#rmarkdown-guides"><i class="fa fa-check"></i>RMarkdown Guides</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.york.ac.uk/business-society/people/lewis-ramsden/" target="blank">Dr. Lewis Ramsden</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to R Programming - University of York</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="loops" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Week3</span> Loops<a href="loops.html#loops" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="for-loops" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> For loops<a href="loops.html#for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>‘For loops’, sometimes just known as ‘Loops’ are one of the most useful tools in programming and you will find, once you understand how to implement them, that they become your best friends. That being said, it is very common that people like them so much that they are used when they are not necessary, as we will see later.</p>
<p>Simply put, a ‘for loop’ allows us to ‘loop’ through all the elements of a given object (usually a vector or matrix) and perform a command or operation for each element. When combined with ‘IF statements’, ‘for loops’ become very powerful and flexible and allow you to perform almost any task.</p>
<p>Let us start by understanding how a basic ‘for loop’ is constructed, then we will consider some simple examples. The general form of a for loop is as follows:</p>
<p><code>for (i in x) {</code> <br>
<code>command in terms of i</code> <br>
<code>}</code> <br></p>
<p>That is, i will take the first value of the object x, perform the command in the brackets with this given value of i, then i will loop to the second value of x and so on. For example:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="loops.html#cb201-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)) {</span>
<span id="cb201-2"><a href="loops.html#cb201-2" tabindex="-1"></a>  <span class="fu">print</span>(i<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb201-3"><a href="loops.html#cb201-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 4
## [1] 9
## [1] 16
## [1] 25</code></pre>
<p>This works perfectly but notice that we could also do this using what we called ‘vectorised calculation’, which takes advantage of how R deals with vectors on an element-by-element basis:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="loops.html#cb203-1" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1]  1  4  9 16 25</code></pre>
<p>As another example, consider the following:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="loops.html#cb205-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">10</span>, <span class="at">to =</span> <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">5</span>))</span></code></pre></div>
<pre><code>##  [1]  10  15  20  25  30  35  40  45  50  55  60  65  70  75  80  85  90  95 100</code></pre>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="loops.html#cb207-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> x){</span>
<span id="cb207-2"><a href="loops.html#cb207-2" tabindex="-1"></a>  <span class="fu">print</span>(i <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb207-3"><a href="loops.html#cb207-3" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE
## [1] FALSE
## [1] TRUE</code></pre>
<p>Again, was this necessary or could we have used vectorised calculations again? If possible, you should always use the vectorised calculation version of a command as this saves times and processing power. That being said,there are many situations where ‘for loops’ are necessary, not just useful.</p>
<p>Let us return to our mtcars data set seenin the previous chapter and consider a problem regarding plotting histograms of the data:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="loops.html#cb209-1" tabindex="-1"></a><span class="fu">hist</span>(mtcars<span class="sc">$</span>hp)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-84-1.png" width="672" /></p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="loops.html#cb210-1" tabindex="-1"></a><span class="fu">hist</span>(mtcars[,<span class="dv">4</span>])</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-84-2.png" width="672" /></p>
<p>Now, imagine you wanted a histogram for every variable. Executing the code <code>hist(mtcars)</code> wouldn’t work as the input necessary for this function should be in the form of a single vector of values. However, to overcome this hurdle, we could make use of ‘for loops’:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="loops.html#cb211-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(mtcars)){</span>
<span id="cb211-2"><a href="loops.html#cb211-2" tabindex="-1"></a>  <span class="fu">hist</span>(mtcars[,i], <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">&quot;Histogram of&quot;</span>, <span class="fu">colnames</span>(mtcars)[i]))</span>
<span id="cb211-3"><a href="loops.html#cb211-3" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-85-1.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-2.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-3.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-4.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-5.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-6.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-7.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-8.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-9.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-10.png" width="672" /><img src="_main_files/figure-html/unnamed-chunk-85-11.png" width="672" /></p>
<p>The above is great, but it would be nice to have them all on one screen together. <strong>Note that the code below is not really linked to for loops but is still worth mentioning here.</strong></p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="loops.html#cb212-1" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>)) <span class="co"># Changes the plot frame to fit 3 rows and 4 columns of separate plots.</span></span>
<span id="cb212-2"><a href="loops.html#cb212-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(mtcars)){</span>
<span id="cb212-3"><a href="loops.html#cb212-3" tabindex="-1"></a>  <span class="fu">hist</span>(mtcars[,i])</span>
<span id="cb212-4"><a href="loops.html#cb212-4" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-86-1.png" width="672" /></p>
<p>This is much better but I would like the individual titles and axis labels to reflect the variable name:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="loops.html#cb213-1" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">4</span>))</span>
<span id="cb213-2"><a href="loops.html#cb213-2" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(mtcars)){</span>
<span id="cb213-3"><a href="loops.html#cb213-3" tabindex="-1"></a>  <span class="fu">hist</span>(mtcars[,i], <span class="at">main =</span> <span class="fu">paste</span>(<span class="st">&quot;Histogram of&quot;</span>, <span class="fu">colnames</span>(mtcars)[i]), <span class="at">xlab =</span> <span class="fu">paste</span>(<span class="fu">colnames</span>(mtcars)[i]))</span>
<span id="cb213-4"><a href="loops.html#cb213-4" tabindex="-1"></a>}</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-87-1.png" width="672" /></p>
<p>Even this very simply example starts to show you the value and versatility of for loops.</p>
<p>Now, as mentioned above, it is also possible to combine ‘for loops’ with IF statements. For example, the code below counts the number of even numbers in a vector of values:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="loops.html#cb214-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">9</span>,<span class="dv">8</span>,<span class="dv">11</span>,<span class="dv">6</span>)</span>
<span id="cb214-2"><a href="loops.html#cb214-2" tabindex="-1"></a></span>
<span id="cb214-3"><a href="loops.html#cb214-3" tabindex="-1"></a>count <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb214-4"><a href="loops.html#cb214-4" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> x) {</span>
<span id="cb214-5"><a href="loops.html#cb214-5" tabindex="-1"></a>  <span class="cf">if</span>(i <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb214-6"><a href="loops.html#cb214-6" tabindex="-1"></a>    count <span class="ot">&lt;-</span> count<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb214-7"><a href="loops.html#cb214-7" tabindex="-1"></a>  }</span>
<span id="cb214-8"><a href="loops.html#cb214-8" tabindex="-1"></a>}</span>
<span id="cb214-9"><a href="loops.html#cb214-9" tabindex="-1"></a><span class="fu">print</span>(count)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-9" class="exercise"><strong>Exercise 3.1  </strong></span>Is there a quicker and easier way to achieve what has been done above without ‘for loops’?</p>
</div>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- sum(x %% 2 == 0) -->
<!-- ``` -->
<!-- </details> -->
<div class="exercise">
<p><span id="exr:unlabeled-div-10" class="exercise"><strong>Exercise 3.2  </strong></span>Can you write a ‘for loop’ that prints out the names of the cars in the <code>mtcars</code> data set which have 8 cylinders? Note, the car names can be found using the <code>rownames(mtcars)</code> command.</p>
</div>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- for(i in 1:nrow(mtcars)){ -->
<!--   if(mtcars$cyl[i]==8){ -->
<!--     print(rownames(mtcars)[i]) -->
<!--   } else {} -->
<!-- } -->
<!-- ``` -->
<!-- </details> -->
<p>In fact, there is actually another way this can be done using conditional extraction which we will talk more about next week.</p>
<div class="exercise">
<p><span id="exr:unlabeled-div-11" class="exercise"><strong>Exercise 3.3  </strong></span>Remember our IF statement from last week that didn’t work correctly because we used a vector in the conditional statement? i.e.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="loops.html#cb216-1" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb216-2"><a href="loops.html#cb216-2" tabindex="-1"></a></span>
<span id="cb216-3"><a href="loops.html#cb216-3" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&lt;</span> <span class="dv">0</span>) {</span>
<span id="cb216-4"><a href="loops.html#cb216-4" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb216-5"><a href="loops.html#cb216-5" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;is a negative even number&quot;</span>))</span>
<span id="cb216-6"><a href="loops.html#cb216-6" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb216-7"><a href="loops.html#cb216-7" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x,<span class="st">&quot;is a negative odd number&quot;</span>))}</span>
<span id="cb216-8"><a href="loops.html#cb216-8" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb216-9"><a href="loops.html#cb216-9" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">0</span>){</span>
<span id="cb216-10"><a href="loops.html#cb216-10" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;is a positive even number&quot;</span>))</span>
<span id="cb216-11"><a href="loops.html#cb216-11" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb216-12"><a href="loops.html#cb216-12" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;is a positive odd number&quot;</span>))</span>
<span id="cb216-13"><a href="loops.html#cb216-13" tabindex="-1"></a>  }</span>
<span id="cb216-14"><a href="loops.html#cb216-14" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb216-15"><a href="loops.html#cb216-15" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;is Zero&quot;</span>))</span>
<span id="cb216-16"><a href="loops.html#cb216-16" tabindex="-1"></a>}</span></code></pre></div>
<p>Can you now apply the idea of a ‘for loop’ to get this to work correctly?</p>
</div>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- x <- c(1, 2, 3) -->
<!-- for(i in x){ -->
<!-- if (i < 0) { -->
<!--   if (i %% 2 == 0){ -->
<!--     print(paste(i, "is a negative even number")) -->
<!--   } else { -->
<!--     print(paste(i,"is a negative odd number"))} -->
<!-- } else if (i > 0) { -->
<!--   if (i %% 2 == 0){ -->
<!--     print(paste(i, "is a positive even number")) -->
<!--   } else { -->
<!--     print(paste(i, "is a positive odd number")) -->
<!--   } -->
<!-- } else { -->
<!--   print(paste(i, "is Zero")) -->
<!--   } -->
<!-- } -->
<!-- ``` -->
<!-- </details> -->
<div id="matrices-1" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Matrices<a href="loops.html#matrices-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far, we have seen how we can Loop through a vector of values to perform certain tasks, but it is also possible to do this over a matrix of values. The only difference is that this requires two loops (one for each index - row and column). For example:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="loops.html#cb217-1" tabindex="-1"></a>(M <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">round</span>(<span class="fu">runif</span>(<span class="dv">9</span>,<span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">100</span>)), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">3</span>)) <span class="co"># This creates a 3x3 matrix of rounded uniform random values.</span></span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   44   86   46
## [2,]   20   98   35
## [3,]   56   34   26</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="loops.html#cb219-1" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(M)){</span>
<span id="cb219-2"><a href="loops.html#cb219-2" tabindex="-1"></a>  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(M)){</span>
<span id="cb219-3"><a href="loops.html#cb219-3" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;Element [&quot;</span>, i,<span class="st">&quot;,&quot;</span>,j,<span class="st">&quot;] of M is equal to&quot;</span>,M[i,j]))</span>
<span id="cb219-4"><a href="loops.html#cb219-4" tabindex="-1"></a>    }</span>
<span id="cb219-5"><a href="loops.html#cb219-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;Element [ 1 , 1 ] of M is equal to 44&quot;
## [1] &quot;Element [ 1 , 2 ] of M is equal to 86&quot;
## [1] &quot;Element [ 1 , 3 ] of M is equal to 46&quot;
## [1] &quot;Element [ 2 , 1 ] of M is equal to 20&quot;
## [1] &quot;Element [ 2 , 2 ] of M is equal to 98&quot;
## [1] &quot;Element [ 2 , 3 ] of M is equal to 35&quot;
## [1] &quot;Element [ 3 , 1 ] of M is equal to 56&quot;
## [1] &quot;Element [ 3 , 2 ] of M is equal to 34&quot;
## [1] &quot;Element [ 3 , 3 ] of M is equal to 26&quot;</code></pre>
<p>Another very important technique that you will need when working with ‘for loops’ is how to store values in a new vector (matrix) as you finish each loop. This is something that you will use a lot when working through your R based assessments in your Actuarial modules, since you will be working with larger data sets and need to make calculations which then need to be saved for use later on.</p>
<p>As a simple example let us see how we could use a ‘for loop’ to generate some random values and save them in a vector if they satisfy some condition.</p>
<p>Before we start, let us note how you can add a value to an already existing vector</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="loops.html#cb221-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>))</span></code></pre></div>
<pre><code>## [1] 1 3 5 7 9</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="loops.html#cb223-1" tabindex="-1"></a>(x <span class="ot">&lt;-</span> <span class="fu">c</span>(x, <span class="dv">11</span>))</span></code></pre></div>
<pre><code>## [1]  1  3  5  7  9 11</code></pre>
<p>In the above line of code, x has been over-written as the vector which contain all the values of the original vector x but then also includes 11 as well. This type of idea of over-writing a given value using itself has been seen already (count variable at the start of this session) and is a very common technique.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="loops.html#cb225-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb225-2"><a href="loops.html#cb225-2" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>){</span>
<span id="cb225-3"><a href="loops.html#cb225-3" tabindex="-1"></a>  rand <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>) <span class="co"># This generates a standard normal random variable</span></span>
<span id="cb225-4"><a href="loops.html#cb225-4" tabindex="-1"></a>  <span class="cf">if</span>(rand <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb225-5"><a href="loops.html#cb225-5" tabindex="-1"></a>    vec <span class="ot">&lt;-</span> <span class="fu">c</span>(vec,rand)</span>
<span id="cb225-6"><a href="loops.html#cb225-6" tabindex="-1"></a>  }</span>
<span id="cb225-7"><a href="loops.html#cb225-7" tabindex="-1"></a>}</span>
<span id="cb225-8"><a href="loops.html#cb225-8" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>##  [1] 0.005512954 1.498507015 0.293155615 0.276509132 2.039636613 1.849125749
##  [7] 0.807890904 0.080278717 0.099427783 1.078409010 2.023306983 0.207384631
## [13] 0.515240159</code></pre>
<p>Alternatively, you could actually save each value in the vector as a particular element, e.g.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="loops.html#cb227-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb227-2"><a href="loops.html#cb227-2" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="loops.html#cb229-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>){</span>
<span id="cb229-2"><a href="loops.html#cb229-2" tabindex="-1"></a>  rand <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb229-3"><a href="loops.html#cb229-3" tabindex="-1"></a>  <span class="cf">if</span>(rand <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb229-4"><a href="loops.html#cb229-4" tabindex="-1"></a>    vec[i] <span class="ot">&lt;-</span> rand</span>
<span id="cb229-5"><a href="loops.html#cb229-5" tabindex="-1"></a>  }</span>
<span id="cb229-6"><a href="loops.html#cb229-6" tabindex="-1"></a>}</span>
<span id="cb229-7"><a href="loops.html#cb229-7" tabindex="-1"></a>vec</span></code></pre></div>
<pre><code>##  [1]        NA        NA        NA 0.1392454 1.2637265        NA 0.7050683
##  [8]        NA 0.9163221 0.2384281 1.0067351        NA        NA 0.4972835
## [15] 0.3291732 2.0054633        NA        NA        NA 0.3183235</code></pre>
<p>In fact, you could have easily set this up to store all the values in a Matrix rather than a vector</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="loops.html#cb231-1" tabindex="-1"></a>(mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fu">rep</span>(<span class="cn">NA</span>, <span class="dv">16</span>)), <span class="at">nrow =</span> <span class="dv">4</span>))</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4]
## [1,]   NA   NA   NA   NA
## [2,]   NA   NA   NA   NA
## [3,]   NA   NA   NA   NA
## [4,]   NA   NA   NA   NA</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="loops.html#cb233-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>){</span>
<span id="cb233-2"><a href="loops.html#cb233-2" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>){</span>
<span id="cb233-3"><a href="loops.html#cb233-3" tabindex="-1"></a>  rand <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">1</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb233-4"><a href="loops.html#cb233-4" tabindex="-1"></a>  <span class="cf">if</span>(rand <span class="sc">&gt;</span> <span class="dv">0</span>){</span>
<span id="cb233-5"><a href="loops.html#cb233-5" tabindex="-1"></a>    mat[i,j] <span class="ot">&lt;-</span> rand</span>
<span id="cb233-6"><a href="loops.html#cb233-6" tabindex="-1"></a>  }</span>
<span id="cb233-7"><a href="loops.html#cb233-7" tabindex="-1"></a>  }</span>
<span id="cb233-8"><a href="loops.html#cb233-8" tabindex="-1"></a>}</span>
<span id="cb233-9"><a href="loops.html#cb233-9" tabindex="-1"></a>mat</span></code></pre></div>
<pre><code>##           [,1]      [,2]     [,3]     [,4]
## [1,] 0.6653966        NA       NA 1.369854
## [2,] 0.5747815 0.2128382       NA       NA
## [3,]        NA        NA       NA       NA
## [4,]        NA 0.5684018 1.056248       NA</code></pre>
</div>
</div>
<div id="while-loops" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> While loops<a href="loops.html#while-loops" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The final tool we will consider in the area of loops, is the so-called ‘WHILE loop’. A While loop is similar to a for loop but instead of simply looping through different values of a specified vector (i in 1:10) it will continue to loop whilst a certain condition holds and will only stop when this condition is no longer satisfied. For example:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="loops.html#cb235-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb235-2"><a href="loops.html#cb235-2" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb235-3"><a href="loops.html#cb235-3" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb235-4"><a href="loops.html#cb235-4" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i<span class="sc">+</span><span class="dv">1</span></span>
<span id="cb235-5"><a href="loops.html#cb235-5" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p><strong>WARNING - Be very careful when using while loops. If you do not write them correctly they can result in your code running infinitely. As an example, try seeing what happens if you forget to increment i to add one each time.</strong></p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="loops.html#cb237-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb237-2"><a href="loops.html#cb237-2" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;</span> <span class="dv">6</span>) {</span>
<span id="cb237-3"><a href="loops.html#cb237-3" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb237-4"><a href="loops.html#cb237-4" tabindex="-1"></a>}</span></code></pre></div>
<p>While loops are very helpful when the number of loops required is unknown. For example, imagine we wanted to find the smallest integer for which the sum of all positive integers up to this value was greater than 1000. This can easily be done using a while loop.</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="loops.html#cb238-1" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb238-2"><a href="loops.html#cb238-2" tabindex="-1"></a>sum <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb238-3"><a href="loops.html#cb238-3" tabindex="-1"></a></span>
<span id="cb238-4"><a href="loops.html#cb238-4" tabindex="-1"></a><span class="cf">while</span>(sum <span class="sc">&lt;</span> <span class="dv">1000</span>){</span>
<span id="cb238-5"><a href="loops.html#cb238-5" tabindex="-1"></a>  sum <span class="ot">&lt;-</span> sum <span class="sc">+</span> i</span>
<span id="cb238-6"><a href="loops.html#cb238-6" tabindex="-1"></a>  <span class="cf">if</span> (sum <span class="sc">&lt;</span> <span class="dv">1000</span>){</span>
<span id="cb238-7"><a href="loops.html#cb238-7" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb238-8"><a href="loops.html#cb238-8" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb238-9"><a href="loops.html#cb238-9" tabindex="-1"></a>    <span class="fu">print</span>(i)</span>
<span id="cb238-10"><a href="loops.html#cb238-10" tabindex="-1"></a>  }</span>
<span id="cb238-11"><a href="loops.html#cb238-11" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 45</code></pre>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="loops.html#cb240-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">44</span>)</span></code></pre></div>
<pre><code>## [1] 990</code></pre>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="loops.html#cb242-1" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">45</span>)</span></code></pre></div>
<pre><code>## [1] 1035</code></pre>
<div class="exercise">
<p><span id="exr:unlabeled-div-12" class="exercise"><strong>Exercise 3.4  </strong></span>Create a variable called <code>speed</code> and assign this a rounded random uniform distributed value between 50 - 60, i.e. <code>round(runif(1, 50, 60))</code>. Using a while loop, create a code that prints “Your speed is ?? - Slow Down” if speed is greater than 30 then takes 7 off the speed variable. If speed is less than or equal to 30 it should print out “Your speed is ?? - Thank you for not speeding”.</p>
</div>
<!-- <details> -->
<!-- <summary>**Solutions**</summary> -->
<!-- ```{r} -->
<!-- speed <- round(runif(1, 50, 60)) -->
<!-- while(speed > 30){ -->
<!--   print(paste("Your speed is", speed, "- Slow Down!")) -->
<!--   speed <- speed - 7 -->
<!-- } -->
<!-- print(paste("Your speed is", speed, "- Thank you for not speeding.")) -->
<!-- ``` -->
<!-- </details> -->
<p>I appreciate this is a lot to take in for those who are not familiar with programming but I assure these ideas become second nature with a little practice. We will use them in a larger exercise in the last session so you can see how and when these things would all be used in a practical example. However, for now, I highly recommend that you complete the exercises in DataCamp on conditional statements and loops (Intermediate R) for extra practice.</p>
<p>There are other versions and common commands used in loops, namely <code>break</code>, <code>next</code> and <code>repeats</code>, but I will leave these for you to explore in your own time (ideally via DataCamp). You will need these for the exercises below.</p>
</div>
<div id="exercises-4" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Exercises<a href="loops.html#exercises-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Use the command <code>x &lt;- rexp(20, rate = 0.5)</code> to create a vector containing 20 simulations of an Exponential random variable with mean <span class="math inline">\(2\)</span>. Using a loop, return the number of values that are larger than the sample mean of the vector x. You are allowed to use the <code>mean()</code> function.</li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- x <- rexp(20, rate = 0.5) -->
<!-- num <- 0 -->
<!-- for(i in 1:length(x)){ -->
<!--  if(x[i] > mean(x)){ -->
<!--    num <- num + 1 -->
<!--  } -->
<!-- } -->
<!-- x -->
<!-- ``` -->
<!-- </details> -->
<ol start="2" style="list-style-type: decimal">
<li>Write a <code>while()</code> loop which prints out the odd numbers from 1 through 7.</li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- i <- 1 -->
<!-- while(i <= 7){ -->
<!--   ifelse(i %% 2 == 1, print(i), NA) -->
<!--   i <- i + 1 -->
<!-- } -->
<!-- ``` -->
<!-- </details> -->
<ol start="3" style="list-style-type: decimal">
<li>Using <code>for()</code> loops, generate and print the first 20 values of the famous Fibonacci sequence (starting with <span class="math inline">\(0, 1\)</span>). Recall, the Fibonacci sequence is obtained by evaluating the next number in the sequence as the sum of the previous two numbers in the sequence.</li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- Fib <- c(0,1) -->
<!-- for (i in 3:20){ -->
<!--   Fib[i] <- Fib[i-1] + Fib[i-2] -->
<!-- } -->
<!-- Fib -->
<!-- ``` -->
<!-- </details> -->
<ol start="4" style="list-style-type: decimal">
<li>By altering your code in the previous question, use a <code>while()</code> loop to determine how many values the Fibonacci sequence contains before its value exceeds 100,000.</li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- Fib1 <- c(0,1) -->
<!-- i <- 2 -->
<!-- while(Fib1[i] < 100000){ -->
<!--   Fib1[i+1] <- Fib1[i] + Fib1[i-1] -->
<!--   i <- i + 1 -->
<!-- } -->
<!-- length(Fib1) -->
<!-- ``` -->
<!-- </details> -->
<ol start="5" style="list-style-type: decimal">
<li>Use a <code>while()</code> loop to determine the smallest value of <span class="math inline">\(x\)</span> such that
<span class="math display">\[\begin{equation*}
\prod_{n=1}^x n &gt; 10^{6}.
\end{equation*}\]</span></li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- prod <- 1 -->
<!-- n <- 1 -->
<!-- while(prod <= 1000000){ -->
<!--   n <- n + 1 -->
<!--   prod <- prod*n -->
<!-- } -->
<!-- n -->
<!-- ``` -->
<!-- </details> -->
<ol start="6" style="list-style-type: decimal">
<li>Using a <code>for()</code> loop, simulate the flip of a fair coin twenty times, keeping track of the individual outcomes (1 = Heads, 0 = Tails) in a vector.</li>
</ol>
<p><strong>[Hint: You can simulate random numbers that follow given distributions. For example, normal random numbers using rnorm(), exponential using rexp() as seen in Problem 1 or binomial random values using rbinom(). Moreover, the Bernoulli distribution with success parameter <span class="math inline">\(p \in [0,1]\)</span>, which gives a value of 0 or 1, is nothing but a binomial distribution with parameters <span class="math inline">\(n =1\)</span> and <span class="math inline">\(p\)</span>.]</strong></p>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- x <- rbinom(20, 1, 0.5) -->
<!-- Flips <- c() -->
<!-- for(i in 1:length(x)){ -->
<!--   Flips[i] <- ifelse(x[i] == 1, "Heads", "Tails") -->
<!-- } -->
<!-- Flips -->
<!-- ``` -->
<!-- </details> -->
<ol start="7" style="list-style-type: decimal">
<li>Can you solve the previous problem again without the use of <code>for()</code> loops?</li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- x <- rbinom(20, 1, 0.5) -->
<!-- ifelse(x == 1, "Heads", "Tails") -->
<!-- ``` -->
<!-- </details> -->
<ol start="8" style="list-style-type: decimal">
<li>Using <code>for()</code> loops, fill a <span class="math inline">\(5 \times 5\)</span> matrix with simulated values from the Poisson distribution having parameter <span class="math inline">\(\lambda = 5\)</span> (<code>rpois(n, lambda = 5)</code>). Do this again but without using loops, only ‘vectorised calculations’.</li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- # With Loops: -->
<!-- M <- matrix(NA, nrow = 5, ncol = 5) -->
<!-- for(i in 1:5){ -->
<!--   for(j in 1:5){ -->
<!--     x <- rpois(1, lambda = 5) -->
<!--     M[i,j] <- x -->
<!--   } -->
<!-- } -->
<!-- M -->
<!-- # Vectorised calculation: -->
<!-- x <- rpois(25, lambda = 5) -->
<!-- (M1 <- matrix(x, nrow = 5, ncol = 5)) -->
<!-- ``` -->
<!-- </details> -->
<p><strong>Advanced Extension:</strong> Can you modify the above to only fill the matrix with simulated values between 1 and 8? Hint: You will have to use the <code>repeat</code> and <code>break</code> commands.</p>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- sim <- c() -->
<!-- for(i in 1:25){ -->
<!--   repeat{ -->
<!--     x <- rpois(1, lambda = 5) -->
<!--     if(x >= 1 && x <= 8){ -->
<!--       sim[i] <- x -->
<!--       break -->
<!--     } else {} -->
<!--   } -->
<!-- } -->
<!-- matrix(sim, nrow = 5, ncol = 5) -->
<!-- ``` -->
<!-- </details> -->
</div>
<div id="applied-exercises-2" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Applied Exercises<a href="loops.html#applied-exercises-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>The problems below are a little more involved and may take some time. Please have a go at these but do not worry if you find this difficult, we will actually see something similar to this again next semester.</strong></p>
<ol style="list-style-type: decimal">
<li>Assume that the daily returns on an asset are normally distributed with mean 0 and standard deviation of 0.01. Assuming that the starting price is £100, write a <code>while()</code> loop to simulate the daily stock price of this asset until the moment it exceeds £150 or falls below £50.</li>
</ol>
<p><strong>[Recall: You can simulate a normal random value using the following command <code>rnorm(n, mean = , sd = )</code> where <span class="math inline">\(n\)</span> is the number of values you want to simulate]</strong></p>
<ol start="2" style="list-style-type: decimal">
<li><p>How many days does it take for the stock price to exceed £150 or drop below £50?</p></li>
<li><p>Plot the path of the stock price over time using the <code>plot()</code> function.</p></li>
<li><p>Using a <code>for()</code> loop, repeat the first step 100 times and provide an estimate for the number of days it will take to exceed £150 or drop below £50.</p></li>
<li><p>Simulate the stock price for exactly 365 days. If the price exceeds £150 or falls below £50, stop the simulation and ask R to print out the value of the stock at this point.</p></li>
<li><p>By repeating a similar idea to the previous step 100 times, can you estimate the probability that the stock price will either exceed £150 or drop below £50.</p></li>
</ol>
<!-- <details> -->
<!-- <summary>**Solution**</summary> -->
<!-- ```{r} -->
<!-- stock <- 100 -->
<!-- stock.prices <- c(stock) -->
<!-- i <- 1 -->
<!-- while(stock >= 50 && stock <= 150){ -->
<!--   i <- i + 1 -->
<!--   return <- rnorm(1, 0, 0.01) -->
<!--   stock <- stock*(1 + return) -->
<!--   stock.prices <- c(stock.prices, stock) -->
<!-- } -->
<!-- i -->
<!-- plot(1:i, stock.prices, type = "l", main = "Stock Price Over Time", xlab = "Time (Days)", ylab = "Stock Price (£)", ylim = c(40, 160)) -->
<!-- abline(h = 50, lty = 2, col = "red") -->
<!-- abline(h = 150, lty = 2, col = "red") -->
<!-- ``` -->
<!-- </details> -->
</div>
<div id="datacamp-courses-2" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> DataCamp course(s)<a href="loops.html#datacamp-courses-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><a href="https://www.datacamp.com/courses/intermediate-r" class="uri">https://www.datacamp.com/courses/intermediate-r</a> (Intermediate R Course)</li>
<li><a href="https://app.datacamp.com/learn/courses/intermediate-r-for-finance" class="uri">https://app.datacamp.com/learn/courses/intermediate-r-for-finance</a> (Intermidiate R for Finance Course)</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="conditionals-and-if-statements.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03-Loops.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
